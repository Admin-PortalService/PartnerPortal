@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>@ViewData["Title"] - Partner Portal</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="~/AdminLTE/plugins/fontawesome-free/css/all.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Tempusdominus Bootstrap 4 -->
    <link rel="stylesheet" href="~/AdminLTE/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="~/AdminLTE/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <!-- JQVMap -->
    <link rel="stylesheet" href="~/AdminLTE/plugins/jqvmap/jqvmap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="~/AdminLTE/dist/css/alt/adminlte.core.css">
    <link rel="stylesheet" href="~/AdminLTE/dist/css/adminlte.min.css">
    <!-- daterange picker -->
    <link rel="stylesheet" href="~/AdminLTE/plugins/daterangepicker/daterangepicker.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="~/AdminLTE/plugins/datatables-bs4/css/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="~/css/Register.css" asp-append-version="true" />
    <script src="~/js/knockout.js"></script>
    <link rel="stylesheet" href="~/css/thirdparty.bundle.css" />
    <script src="~/js/thirdparty.bundle.js"></script>
</head>
<body class="hold-transition sidebar-mini">
    <div class="wrapper">

        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-light" style="background-color : #169D53">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
                </li>
                @*<li class="nav-item d-none d-sm-inline-block">
                <a class="nav-link" asp-area="Controllers" asp-controller="Dashboard" asp-action="Index">Home</a>
                </li>*@
                <li class="nav-item d-none d-sm-inline-block">

                </li>
            </ul>
        </nav>
        <aside class="main-sidebar elevation-4" style="background-color: #EEEEEE">
            <!-- Brand Logo -->
            @*<a href="#" class="brand-link">*@
            <a asp-area="" asp-controller="Home" asp-action="Index" class="brand-link">
                <img src="~/img/Logo.png" alt="AdminLTE Logo" class="brand-image">
                @*<img src="~/img/service2.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
                style="opacity: .8">*@
                <span class="brand-text font-weight-light" style="color: black;">Partner Portal</span>
            </a>
            <div class="sidebar">
                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="true">
                        @if (!(SignInManager.IsSignedIn(User)))

                        {
                            
                        @*<li class="nav-item">
                                <a class="nav-link" asp-area="Identity" asp-page="/Account/Register" style="color: #05AA35">
                        <i class="fas fa-user"></i>
                        Register
                        </a>
                        </li>*@
                        <li class="nav-item">
                            <a class="nav-link" asp-area="Identity" asp-page="/Account/Login" style="color: #05AA35">
                                <i class="fas fa-user"> </i>
                                Login
                            </a>
                        </li>

                        }

                        else
                        {
                            <li class="nav-item">
                                <a class="nav-link" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage" style="color: black;">Hello @User.Identity?.Name!</a>
                            </li>
                            <li class="nav-item">
                                <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                    <button type="submit" class="nav-link btn btn-link">Logout</button>
                                </form>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Dashboard" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-tachometer-alt"></i>
                                    <p>
                                        Dashboard
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Reseller" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-handshake"></i>
                                    <p>
                                        Reseller Program
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Sale" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-shopping-cart"></i>
                                    <p>
                                        Sale
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Price" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-hand-holding-usd"></i>
                                    <p>
                                        Price List
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>                                                 
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="ProductVersion" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-project-diagram"></i>
                                    <p>
                                        Product Version
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Campus" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-graduation-cap"></i>
                                    <p>
                                        Cuscen Campus
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>       
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="AssitTools" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-tools"></i>
                                    <p>
                                        Implementation Assist
                                       <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Contract" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-file-contract"></i>
                                    <p>
                                        Contract
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Statement" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-newspaper"></i>
                                    <p>
                                        Statement
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="Quotation" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-newspaper"></i>
                                    <p>
                                        Quotation
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <!-- Add icons to the links using the .nav-icon class
                                 with font-awesome or any other icon font library -->
                            
                            <!-- Request list -->
                            <li class="nav-item has-treeview menu-close">
                                <a href="#" class="nav-link" style="color:#05AA35">
                                    <i class="nav-icon fas fa-pen-square"></i>
                                    <p>
                                        Request
                                        <i class="right fas fa-angle-left"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Incident" asp-action="Create">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Create Incident</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Incident" asp-action="IndexIncident">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">View Incidents</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <!-- End of Request list -->
                            <!-- Assign list -->
                            <li class="nav-item has-treeview menu-close">
                                <a href="#" class="nav-link" style="color:#05AA35">
                                    <i class="nav-icon fas fa-user-circle"></i>
                                    <p>
                                        Assign
                                        <i class="right fas fa-angle-left"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Assign" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Assign Incidents</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Assign" asp-action="AssignMe" asp-route-name="@ViewBag.UserMail">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Assign To Me</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Assign" asp-action="AssignLog">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Assign Log History</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <!-- End of Assign list -->
                            <li class="nav-item has-treeview menu-close">
                                <a href="#" class="nav-link" style="color: #05AA35">
                                    <i class="nav-icon fas fa-file-alt"></i>
                                    <p>
                                        Reporting
                                        <i class="right fas fa-angle-left"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white; color: #059941;" asp-area="" asp-controller="IncReport" asp-action="Viewer">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p>Incident Report</p>
                                        </a>
                                    </li>
                                    @*<li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Projects" asp-action="viewer">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Maintenance Log History</p>
                                        </a>
                                    </li>*@
                                </ul>
                            </li>
                            <li class="nav-item has-treeview">
                                <a class="nav-link" asp-area="" asp-controller="MeetingNote" asp-action="Index" style="color: #05AA35">
                                    <i class="nav-icon fas fa-newspaper"></i>
                                    <p>
                                        Meeting Note
                                        <i class="right fas fa-angle-right"></i>
                                    </p>
                                </a>
                            </li>
                            <!-- Master list -->
                            <li class="nav-item has-treeview">
                                <a href="#" class="nav-link" style="color: #05AA35">
                                    <i class="nav-icon fa fa-stream"></i>
                                    <p>
                                        Master Setup
                                        <i class="right fas fa-angle-left"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Customer" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Organization</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Projects" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Project</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Module" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Module</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="IssueType" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Issue Type</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Item" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Item</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="SLAConfig" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">SLA Configuration</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <!-- End of Master list -->
                            <li class="nav-item has-treeview menu-close">
                                <a href="#" class="nav-link" style="color: #05AA35">
                                    <i class="nav-icon fas fa-plus-square"></i>
                                    <p>
                                        System Setup
                                        <i class="right fas fa-angle-left"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Users" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">User</p>
                                        </a>
                                    </li>
                                    @*<li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="UserAccess" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">User Details</p>
                                        </a>
                                    </li>*@
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="Roles" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Role</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" style="background-color:white;" asp-area="" asp-controller="RolePermission" asp-action="Index">
                                            <i class="far fa-circle nav-icon"></i>
                                            <p style="color: #059941">Permission</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>


                        }
                    </ul>
                </nav>



                <!-- /.sidebar -->
            </div>
        </aside>
       
            <div class="content-wrapper">
                @RenderBody()
            </div>
      
        <!-- Content Wrapper. Contains page content -->
        <!-- /.content-wrapper -->
     

        <!-- /.control-sidebar -->
        <!-- Main Footer -->
        <footer class="main-footer">
            <!-- To the right -->
            <div class="float-right d-none d-sm-inline">
                2023 Version: 1.0
            </div>
            <!-- Default to the left -->
            <strong> Partner Portal</strong>
        </footer>
    </div>
    <!-- ./wrapper -->
    <!-- REQUIRED SCRIPTS -->
    <!-- jQuery -->
    <script src="~/AdminLTE/plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="~/AdminLTE/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="~/AdminLTE/dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <!-- date-range-picker -->
    <script src="~/AdminLTE/plugins/daterangepicker/daterangepicker.js"></script>
    <!-- DataTables -->
    <script src="~/AdminLTE/plugins/datatables/jquery.dataTables.js"></script>
    <script src="~/AdminLTE/plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>
    <!-- ChartJS -->
    <script src="~/AdminLTE/plugins/chart.js/Chart.min.js"></script>
    <!-- AdminLTE dashboard demo  -->
    <script src="~/AdminLTE/dist/js/pages/dashboard.js"></script>
    <!-- PAGE SCRIPTS -->
    <script src="~/AdminLTE/dist/js/pages/dashboard2.js"></script>
    <!-- jQuery Knob Chart -->
    <script src="~/AdminLTE/plugins/jquery-knob/jquery.knob.min.js"></script>
    <!-- OPTIONAL SCRIPTS -->
    <script src="~/AdminLTE/dist/js/demo.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-min.js"></script>

    <script>
        // var scr = document.createElement('script');
        // scr.onload = function () {
        //     display("Loaded: " + typeof ko);
        // };
        // scr.onerror = function () {
        //     display("Error");
        // };

        // scr.src = "https://localhost:7241/js/knockout.js";
        
        // document.querySelector("script").parentNode.appendChild(scr);

        function display(msg) {
            $("<p>").html(String(msg)).appendTo(document.body);
        }
        $(function () {

            


            //Initialize Select2 Elements
            $('.select2').select2()

            //Initialize Select2 Elements
            $('.select2bs4').select2({
                theme: 'bootstrap4'
            })
        })
    </script>
    <script>
        $("input").on("change", function () {
            this.setAttribute(
                "data-date",
                moment(this.value, "YYYY-MM-DD")
                    .format(this.getAttribute("data-placeholder"))
            )
        }).trigger("change")

    </script>
    <script>
        $(function () {
            $("#example1").DataTable();
            $('#example2').DataTable();
        });
    </script>

    <script>
        $(function () {
            //-------------
            //- DONUT CHART -
            //-------------
            // Get context with jQuery - using jQuery's .get() method.
            var donutChartCanvas = $('#donutChart').get(0).getContext('2d')
            var donutData = {
                labels: [
                    'Open',
                    'In Progress',
                    'Closed',
                ],
                datasets: [
                    {
                        data: [11, 1, 1],
                        backgroundColor: ['#f56954', '#f39c12', '#00a65a'],
                    }
                ]
            }
            var donutOptions = {
                maintainAspectRatio: false,
                responsive: true,
            }
            //Create pie or douhnut chart
            // You can switch between pie and douhnut using the method below.
            var donutChart = new Chart(donutChartCanvas, {
                type: 'doughnut',
                data: donutData,
                options: donutOptions
            })

        });
    </script>
    <script>
        $(document).on("click", ".btnDelete", function () {
            var deletedId = $(this).data("id");
            $("#modal-delete-confirm #deletedId").val(deletedId);
            // As pointed out in comments,
            // it is unnecessary to have to manually call the modal.
            // $('#addBookDialog*). modal ('show');
        });

    </script>

    <script>
        $(document).ready(function () {
            /** add active class and stay opened when selected */
            var url = window.location;

            // for sidebar menu entirely but not cover treeview
            $('ul.nav-sidebar a').filter(function () {
                return this.href == url;
            }).addClass('active');

            // for treeview
            $('ul.nav-treeview a').filter(function () {
                return this.href == url;
            }).parentsUntil(".nav-sidebar > .nav-treeview").addClass('menu-open').prev('a').addClass('active');

            // Change background color for active class within sidebar menu only
            $('ul.nav-sidebar .active').css('background-color', '#059941');
            $('ul.nav-sidebar .active').css('color', '#ffffff');
            // Change background color for active class within treeview only
            $('ul.nav-treeview .active').css('background-color', '#059941');
            $('ul.nav-sidebar .active').css('color', '#ffffff');
        });
    </script>

    @section Scripts {
        <partial name="_ValidationScriptsPartial" />
    }
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>